\tikzsetnextfilename{mr_spatial_encoding_pattern_2}
\begin{tikzpicture}[scale=0.5]
	\draw[white] (-4, -1) rectangle (20, 1);
	\draw (-1, 0) node {$\sum$};
	\draw (-2, 0) node {$=$};
	\draw (-1, 1.5) node [anchor=east] {pattern:};
	\draw[ultra thick,->] (-3, -0.4) -- (-3,0.4);
	\pgfmathsetmacro{\angle}{180}
	\pgfmathsetmacro{\startangle}{90}
	\foreach \idx in {0,1,...,19} {
		\pgfmathsetmacro{\anglevalue}{\startangle+\idx*\angle}
		\pgfmathsetmacro{\x}{\idx+0.4*cos(\anglevalue)}
		\pgfmathsetmacro{\a}{\idx-0.4*cos(\anglevalue)}
		\pgfmathsetmacro{\y}{1.5+0.4*sin(\anglevalue)}
		\pgfmathsetmacro{\b}{1.5+-0.4*sin(\anglevalue)}
		\draw[thick,<-] (\x, \y) -- (\a, \b);
	}
	\foreach \idx in {0,1,...,19} {
		\draw ($(\idx,0)-(0.5,0.5)$) rectangle ($(\idx,0)+(0.5,0.5)$);
	}
	\foreach \idx in {0,2,...,18} {
		\pgfmathsetmacro{\anglevalue}{\startangle+\idx*\angle}
		\pgfmathsetmacro{\x}{\idx+0.4*cos(\anglevalue)}
		\pgfmathsetmacro{\a}{\idx-0.4*cos(\anglevalue)}
		\pgfmathsetmacro{\y}{0.4*sin(\anglevalue)}
		\pgfmathsetmacro{\b}{-0.4*sin(\anglevalue)}
		\draw[thick,<-] (\x, \y) -- (\a, \b);
	}
\end{tikzpicture}