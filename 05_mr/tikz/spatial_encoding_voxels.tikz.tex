\tikzsetnextfilename{mr_spatial_encoding_voxels}
\begin{tikzpicture}[scale=0.5]
	\draw[white] (-4, -1) rectangle (20, 1);
	\pgfmathsetmacro{\angle}{0}
	\foreach \idx in {0,1,...,19} {
		\draw ($(\idx,0)-(0.5,0.5)$) rectangle ($(\idx,0)+(0.5,0.5)$);
		\pgfmathsetmacro{\anglevalue}{90+\idx*\angle}
		\pgfmathsetmacro{\magn}{0.125*(cos(\idx*360/20) + 1)+0.075}
		\pgfmathsetmacro{\x}{\idx+\magn*cos(\anglevalue)}
		\pgfmathsetmacro{\a}{\idx-\magn*cos(\anglevalue)}
		\pgfmathsetmacro{\y}{\magn*sin(\anglevalue)}
		\pgfmathsetmacro{\b}{-\magn*sin(\anglevalue)}
		\draw[thick,<-] (\x, \y) -- (\a, \b);
	}
	\draw[<->] (-0.5, 1.25) -- node [fill=white,font=\small] {voxels in left-right direction} (19.5, 1.25);
\end{tikzpicture}